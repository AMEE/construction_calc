<% form_for @energy_consumption, :url => project_energy_consumptions_path do |f| %>
    <%= f.label :name %> <%= f.text_field :name %>
    <%= f.label :energy_consumption_type %> <%= f.select :energy_consumption_type, EnergyConsumption::TYPE.map {|i| [i[1].name, i[0].to_s]}, {}, :onchange => "updateUnits('energy_consumption');" %>
    <%= f.label :amount %> <%= f.text_field :amount %>
    <%= f.select :units, EnergyConsumption::TYPE[EnergyConsumption::TYPE.keys.first].unit_options %>
    <%= submit_tag "Create Energy Consumption" %>
<% end %>

<% content_for :page_javascript do %>
    units = new Array();
    <% EnergyConsumption::TYPE.keys.each do |key| %>
        units['<%= key.to_s %>'] = '<%= options_for_select(EnergyConsumption::TYPE[key].unit_options).gsub("\n", "") %>';
    <% end %>
<% end %>